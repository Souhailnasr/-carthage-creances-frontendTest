<div class="layout-container">
  <!-- Sidebar (disabled to use global sidebar) -->
  <div class="sidebar" *ngIf="false" [class.collapsed]="!sidebarOpen">
    <div class="sidebar-header">
      <div class="logo" *ngIf="sidebarOpen">
        <i class="fas fa-balance-scale"></i>
        <span>Carthage Créance</span>
      </div>
      <button class="sidebar-toggle" (click)="toggleSidebar()">
        <i class="fas" [class.fa-bars]="!sidebarOpen" [class.fa-times]="sidebarOpen"></i>
      </button>
    </div>

    <!-- User Profile Section -->
    <div class="user-profile-section" *ngIf="currentUser">
      <div class="user-avatar">
        <span class="initials">{{ getInitials() }}</span>
      </div>
      <div class="user-info" *ngIf="sidebarOpen">
        <h3>{{ currentUser?.getFullName() }}</h3>
        <p>{{ getRoleDisplayName() }}</p>
      </div>
    </div>

    <nav class="sidebar-nav">
      <ul class="nav-list">
        <li class="nav-item">
          <a routerLink="/admin/dashboard"
             class="nav-link"
             [class.active]="isActiveRoute('dashboard')">
            <i class="fas fa-tachometer-alt"></i>
            <span *ngIf="sidebarOpen">Tableau de Bord</span>
          </a>
        </li>

        <li class="nav-item">
          <a routerLink="/creancier"
             class="nav-link"
             [class.active]="isActiveRoute('creancier')">
            <i class="fas fa-building"></i>
            <span *ngIf="sidebarOpen">Créanciers</span>
          </a>
        </li>

        <li class="nav-item">
          <a routerLink="/debiteur"
             class="nav-link"
             [class.active]="isActiveRoute('debiteur')">
            <i class="fas fa-user-friends"></i>
            <span *ngIf="sidebarOpen">Débiteurs</span>
          </a>
        </li>

        <li class="nav-item">
          <a routerLink="/dossier"
             class="nav-link"
             [class.active]="isActiveRoute('dossier')">
            <i class="fas fa-folder-open"></i>
            <span *ngIf="sidebarOpen">Gestion des Dossiers</span>
          </a>
        </li>

        <li class="nav-item">
          <a routerLink="/admin/utilisateurs"
             class="nav-link"
             [class.active]="isActiveRoute('utilisateurs')">
            <i class="fas fa-users"></i>
            <span *ngIf="sidebarOpen">Utilisateurs</span>
          </a>
        </li>

        <li class="nav-item">
          <a routerLink="/dossier/enquete"
             class="nav-link"
             [class.active]="isActiveRoute('enquete')">
            <i class="fas fa-search"></i>
            <span *ngIf="sidebarOpen">Phase d'Enquête</span>
          </a>
        </li>

        <li class="nav-item">
          <a routerLink="/dossier/taches"
             class="nav-link"
             [class.active]="isActiveRoute('taches')">
            <i class="fas fa-tasks"></i>
            <span *ngIf="sidebarOpen">Tâches</span>
          </a>
        </li>

        <li class="nav-item">
          <a routerLink="/juridique"
             class="nav-link"
             [class.active]="isActiveRoute('juridique')">
            <i class="fas fa-gavel"></i>
            <span *ngIf="sidebarOpen">Gestion Juridique</span>
          </a>
        </li>

        <li class="nav-item">
          <a routerLink="/notifications"
             class="nav-link"
             [class.active]="isActiveRoute('notifications')">
            <i class="fas fa-bell"></i>
            <span *ngIf="sidebarOpen">Notifications</span>
          </a>
        </li>

        <li class="nav-item">
          <a routerLink="/profil"
             class="nav-link"
             [class.active]="isActiveRoute('profil')">
            <i class="fas fa-user-circle"></i>
            <span *ngIf="sidebarOpen">Mon Profil</span>
          </a>
        </li>
      </ul>
    </nav>

    <div class="sidebar-footer">
      <button class="logout-btn" (click)="logout()" [title]="sidebarOpen ? 'Déconnexion' : ''">
        <i class="fas fa-sign-out-alt"></i>
        <span *ngIf="sidebarOpen">Déconnexion</span>
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content" [class.sidebar-collapsed]="!sidebarOpen">
    <!-- Header avec notifications -->
    <div class="content-header">
      <div class="header-actions">
        <app-notification></app-notification>
      </div>
    </div>

    <div class="content-wrapper">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>
