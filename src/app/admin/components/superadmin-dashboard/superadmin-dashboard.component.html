<div class="superadmin-dashboard">
  <!-- Header -->
  <div class="dashboard-header">
    <div class="header-left">
      <h1>Tableau de Bord Super Admin</h1>
      <p class="current-time">{{ getCurrentTime() }}</p>
    </div>
    <div class="header-right">
      <div class="user-info">
        <div class="user-avatar">
          <span class="initials">{{ getInitials() }}</span>
        </div>
        <div class="user-details">
          <h3>{{ currentUser?.getFullName() }}</h3>
          <p>{{ getRoleDisplayName() }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Statistiques Globales -->
  <div class="global-stats-section">
    <h2>Vue d'ensemble du système</h2>
    <div class="stats-grid">
      <div class="stat-card primary">
        <div class="stat-icon">
          <i class="fas fa-users"></i>
        </div>
        <div class="stat-content">
          <h3>{{ formatNumber(globalStats.totalUsers) }}</h3>
          <p>Utilisateurs Total</p>
          <span class="stat-trend up">
            <i class="fas fa-arrow-up"></i>
            +12%
          </span>
        </div>
      </div>

      <div class="stat-card success">
        <div class="stat-icon">
          <i class="fas fa-folder-open"></i>
        </div>
        <div class="stat-content">
          <h3>{{ formatNumber(globalStats.totalDossiers) }}</h3>
          <p>Dossiers Total</p>
          <span class="stat-trend up">
            <i class="fas fa-arrow-up"></i>
            +8%
          </span>
        </div>
      </div>

      <div class="stat-card info">
        <div class="stat-icon">
          <i class="fas fa-handshake"></i>
        </div>
        <div class="stat-content">
          <h3>{{ formatNumber(globalStats.recouvrementAmiable) }}</h3>
          <p>Recouvrement Amiable</p>
          <span class="stat-trend up">
            <i class="fas fa-arrow-up"></i>
            +15%
          </span>
        </div>
      </div>

      <div class="stat-card warning">
        <div class="stat-icon">
          <i class="fas fa-gavel"></i>
        </div>
        <div class="stat-content">
          <h3>{{ formatNumber(globalStats.recouvrementJuridique) }}</h3>
          <p>Recouvrement Juridique</p>
          <span class="stat-trend stable">
            <i class="fas fa-minus"></i>
            +2%
          </span>
        </div>
      </div>

      <div class="stat-card danger">
        <div class="stat-icon">
          <i class="fas fa-clock"></i>
        </div>
        <div class="stat-content">
          <h3>{{ formatNumber(globalStats.dossiersEnCours) }}</h3>
          <p>Dossiers en Cours</p>
          <span class="stat-trend down">
            <i class="fas fa-arrow-down"></i>
            -5%
          </span>
        </div>
      </div>

      <div class="stat-card dark">
        <div class="stat-icon">
          <i class="fas fa-chart-line"></i>
        </div>
        <div class="stat-content">
          <h3>{{ globalStats.performanceGlobale }}%</h3>
          <p>Performance Globale</p>
          <span class="stat-trend up">
            <i class="fas fa-arrow-up"></i>
            +7%
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Statistiques par Module -->
  <div class="modules-stats-section">
    <h2>Performance par Module</h2>
    <div class="modules-grid">
      <div class="module-card" *ngFor="let module of moduleStats">
        <div class="module-header">
          <div class="module-icon" [style.background-color]="module.color">
            <i [class]="module.icon"></i>
          </div>
          <div class="module-info">
            <h4>{{ module.name }}</h4>
            <div class="module-trend" [style.color]="getTrendColor(module.trend)">
              <i [class]="getTrendIcon(module.trend)"></i>
              <span>{{ module.percentage > 0 ? '+' : '' }}{{ module.percentage }}%</span>
            </div>
          </div>
        </div>
        <div class="module-value">
          <h2>{{ formatNumber(module.value) }}</h2>
        </div>
        <div class="module-progress">
          <div class="progress-bar">
            <div class="progress-fill" 
                 [style.width.%]="Math.abs(module.percentage)" 
                 [style.background-color]="module.color">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Graphiques et Analyses -->
  <div class="charts-section">
    <div class="charts-grid">
      <!-- Graphique des dossiers par mois -->
      <div class="chart-card">
        <div class="chart-header">
          <h3>Évolution des Dossiers</h3>
          <div class="chart-actions">
            <button class="btn btn-sm btn-outline-primary">
              <i class="fas fa-download"></i>
              Exporter
            </button>
          </div>
        </div>
        <div class="chart-content">
          <div class="chart-placeholder">
            <i class="fas fa-chart-area"></i>
            <p>Graphique des dossiers créés par mois</p>
            <div class="chart-data">
              <div class="data-point" *ngFor="let data of chartData.dossiersParMois.datasets[0].data; let i = index">
                <span class="data-label">{{ chartData.dossiersParMois.labels[i] }}</span>
                <span class="data-value">{{ data }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Graphique de performance des agents -->
      <div class="chart-card">
        <div class="chart-header">
          <h3>Performance des Agents</h3>
          <div class="chart-actions">
            <button class="btn btn-sm btn-outline-primary">
              <i class="fas fa-eye"></i>
              Détails
            </button>
          </div>
        </div>
        <div class="chart-content">
          <div class="chart-placeholder">
            <i class="fas fa-chart-bar"></i>
            <p>Performance moyenne par agent</p>
            <div class="performance-list">
              <div class="performance-item" *ngFor="let data of chartData.performanceAgents.datasets[0].data; let i = index">
                <div class="agent-info">
                  <span class="agent-name">{{ chartData.performanceAgents.labels[i] }}</span>
                  <span class="agent-performance">{{ data }}%</span>
                </div>
                <div class="performance-bar">
                  <div class="performance-fill" [style.width.%]="data"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Actions Rapides -->
  <div class="quick-actions-section">
    <h2>Actions Rapides</h2>
    <div class="actions-grid">
      <a routerLink="/admin/utilisateurs" class="action-card">
        <div class="action-icon">
          <i class="fas fa-users-cog"></i>
        </div>
        <div class="action-content">
          <h4>Gestion des Utilisateurs</h4>
          <p>Gérer les comptes et permissions</p>
        </div>
      </a>

      <a routerLink="/dossier" class="action-card">
        <div class="action-icon">
          <i class="fas fa-folder-plus"></i>
        </div>
        <div class="action-content">
          <h4>Créer un Dossier</h4>
          <p>Nouveau dossier de recouvrement</p>
        </div>
      </a>

      <a routerLink="/notifications" class="action-card">
        <div class="action-icon">
          <i class="fas fa-bell"></i>
        </div>
        <div class="action-content">
          <h4>Notifications</h4>
          <p>Voir toutes les notifications</p>
        </div>
      </a>

      <a routerLink="/admin/parametres" class="action-card">
        <div class="action-icon">
          <i class="fas fa-cog"></i>
        </div>
        <div class="action-content">
          <h4>Paramètres Système</h4>
          <p>Configuration de l'application</p>
        </div>
      </a>
    </div>
  </div>
</div>
