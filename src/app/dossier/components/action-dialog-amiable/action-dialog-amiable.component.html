<h2 mat-dialog-title>{{ isEditMode ? 'Modifier' : 'Ajouter' }} Action</h2>
<mat-dialog-content>
  <form [formGroup]="actionForm" class="action-form">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Type d'action</mat-label>
      <mat-select formControlName="type">
        <mat-option *ngFor="let type of typeActions" [value]="type">
          <mat-icon>{{ getTypeIcon(type) }}</mat-icon>
          {{ getTypeLabel(type) }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="actionForm.get('type')?.hasError('required')">
        Le type est requis
      </mat-error>
    </mat-form-field>
    
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Date de l'action</mat-label>
      <input matInput [matDatepicker]="picker" formControlName="dateAction" readonly>
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
      <mat-error *ngIf="actionForm.get('dateAction')?.hasError('required')">
        La date est requise
      </mat-error>
    </mat-form-field>
    
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Nombre d'occurrences</mat-label>
      <input matInput type="number" formControlName="nbOccurrences" min="1">
      <mat-hint>Ex: 2 appels, 1 visite, etc.</mat-hint>
      <mat-error *ngIf="actionForm.get('nbOccurrences')?.hasError('required')">
        Le nombre est requis
      </mat-error>
      <mat-error *ngIf="actionForm.get('nbOccurrences')?.hasError('min')">
        Le nombre doit être au moins 1
      </mat-error>
    </mat-form-field>
    
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Coût unitaire (TND)</mat-label>
      <input matInput type="number" formControlName="coutUnitaire" min="0" step="0.01">
      <mat-hint>Coût unitaire de l'action en dinars tunisiens</mat-hint>
      <mat-error *ngIf="actionForm.get('coutUnitaire')?.hasError('required')">
        Le coût unitaire est requis
      </mat-error>
      <mat-error *ngIf="actionForm.get('coutUnitaire')?.hasError('min')">
        Le coût unitaire doit être supérieur ou égal à 0
      </mat-error>
    </mat-form-field>
    
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Réponse du débiteur</mat-label>
      <mat-select formControlName="reponseDebiteur">
        <mat-option [value]="null">Aucune réponse</mat-option>
        <mat-option [value]="reponses[1]">Positive</mat-option>
        <mat-option [value]="reponses[2]">Négative</mat-option>
      </mat-select>
    </mat-form-field>
  </form>
</mat-dialog-content>
<mat-dialog-actions align="end">
  <button mat-button (click)="close()">Annuler</button>
  <button mat-raised-button color="primary" (click)="save()" [disabled]="!actionForm.valid">
    {{ isEditMode ? 'Modifier' : 'Ajouter' }}
  </button>
</mat-dialog-actions>

